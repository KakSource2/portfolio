import{r as i,b as x,c as h,j as e}from"./index-5cdb3fd4.js";import{a as b}from"./axios-4a70c6fc.js";import{s as r}from"./sweetalert.min-36daf2da.js";const v=()=>{const[a,m]=i.useState(""),[o,d]=i.useState(""),t=x();let l=null;const c=h();i.useEffect(()=>{l=localStorage.getItem("token_tmdb"),l&&c("/tmdb/listings")},[]);const u=async s=>{s.preventDefault();const p=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return a===""||o===""?r({text:t?"Fields cannot be empty!":"Los campos no pueden estar vacíos!",icon:"error"}):p.test(a)?a!=="challenge@alkemy.org"&&o!=="react"?r({text:t?"Bad credentials":"Credenciales erróneas",icon:"error"}):(await b.post("http://challenge-react.alkemy.org",{email:a,password:o}).then(n=>{r({text:t?"You have logged in! You will redirected after this popup":"Has accedido! Serás redireccionado al aceptar.",icon:"success"});const g=n.data.token;localStorage.setItem("token_tmdb",g)}).catch(n=>{console.log(n),r({text:t?"There was some error while accesing the API":"Hubo un error al acceder al Api!",icon:"error"})}),c("/tmdb/listings")):r({text:t?"Email doesn't meet the requirements":"El email no cumple los requisitos",icon:"error"})};return e.jsx("div",{className:"Movies-login",children:e.jsxs("form",{onSubmit:s=>u(s),children:[e.jsxs("label",{children:[e.jsx("span",{children:t?"Username":"Correo electrónico"}),e.jsx("input",{type:"email",name:"email",onChange:s=>m(s.target.value)})]}),e.jsx("br",{}),e.jsxs("label",{children:[e.jsx("span",{children:t?"Password":"Contraseña"}),e.jsx("input",{type:"password",name:"password",onChange:s=>d(s.target.value)})]}),e.jsx("br",{}),e.jsx("button",{type:"submit",children:t?"Login":"Ingresar"})]})})};export{v as default};
